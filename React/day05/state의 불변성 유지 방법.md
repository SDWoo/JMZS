# React에서 State의 불변성은 어떻게 유지할 수 있나요?

<br />

> 목차

> [동우](#동우)

> [은지](#은지)

> [지연](#지연)

<br />

### 동우

- 리액트는 상태값을 업데이트할 때, 얕은 비교를 수행합니다. 원시값의 경우 새로운 메모리에 값을 저장해배열이나, 객체의 속성을 하나하나 비교하는 게 아닌 이전 참조값과 새로운 참조값을 비교하는 것이다. 그러므로 새로운 메모리에 참조 값을 저장하여 값의 불변성을 유지시켜 준다.

<br />

### 은지

- State의 불변성은 직접 상태를 변경하지 않고 useState 훅을 사용해 상태를 변경하도록 해야 합니다. 또한 setState로 상태를 업데이트할 때 원본 상태 데이터를 변경하는 메서드(splice, sort)를 사용하지 않아야 합니다.

<br />

### 지연

- state의 불변성이란 메모리 영역에서 값이 변하지 않는다는 것
- 불변성을 가지는 원시타입과 달리, 배열, 객체 같은 참조 타입의 경우에는 의도적으로 불변성을 지킬 수 있도록 새로운 주소 값을 가진 객체를 생성해 상태를 업데이트한다.

<br />

### 꼬리 질문 모음

- 리액트에서 원시 타입이 아닌 객체나 배열같은 경우에는 어떻게 불변성을 유지시키나요 ?
  - 배열이나 객체를 업데이트할 때, 스프레드 문법을 활용해 얕은 복사를 진행하여 새로운 참조값을 갖는 객체나 배열을 만들어 유지시킨다.
- state의 불변성을 지킴으로써 얻는 효과는?
  - 리액트에서 state를 업데이트할 때는 얕은 비교를 수행하며 값 자체를 비교하는 것이 아닌 객체의 메모리 주소 값의 변경을 확인해 효율적으로 상태를 업데이트할 수 있다. 또한, 불변성을 지켜줌으로써 사이드 이펙트를 방지한다. 객체나 배열의 경우 값을 변경할 때 원본 데이터가 변경될 수 있기 때문에 이 원본 데이터를 참조하고 있는 다른 객체에서 예상치 못한 오류가 발생할 수 있다.
