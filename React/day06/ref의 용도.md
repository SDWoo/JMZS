# Ref의 용도에 대해 설명해주세요.

<br />

> 목차

> [동우](#동우)

> [은지](#은지)

> [지연](#지연)

<br />

### 동우

- 일반적으로 자식을 수정하려면 새로운 props를 전달하여, 자식 컴포넌트를 리렌더링 시키지만, 예외적으로 벗어나 직접적으로 자식을 수정해야 하는 경우에 사용한다.
- 수정할 자식은 React 컴포넌트의 인스턴스 일수도 있고, DOM의 엘리먼트일수도 있는데,React는 두가지를 위한 해결책을 모두 제공한다.
- ref는 일반 객체 인데,createRef로 생성한 ref 객체를 React Element에 props로 전달하면, 함수가 반환한 current 객체의 current 프로퍼티로 해당 React Element 의 DOM 요소에 직접적으로 접근이 가능하다.
- 사용되는 곳의 예제
  - 포커스, 텍스트 선택영역, 혹은 미디어의 재생을 관리할 때.
  - 애니메이션을 직접적으로 실행시킬 때.
  - 서드 파티 DOM 라이브러리를 React와 같이 사용할 때.
    => 비제어 컴포넌트를 제어할 때 (리액트의 재조정과 같은 것들을 활용하지 않는 요소들)

<br />

### 은지

- React에서 state로만 해결할 수 없을 때, Ref 객체를 이용하면 DOM에 직접적으로 접근이 가능합니다.
- ref를 이용해 비제어 컴포넌트를 제어할 수 있습니다.
- 예를 들어 DOM 요소에 focus 기능을 넣거나, 텍스트 선택 영역이나 미디어 재생을 관리할 때 쓰입니다.
- [https://tecoble.techcourse.co.kr/post/2021-05-15-react-ref/](https://tecoble.techcourse.co.kr/post/2021-05-15-react-ref/)

<br />

### 지연

- render 메서드에서 생성된 DOM 노드나 React 엘리먼트에 접근하는 방법을 제공한다.
- state만으로 해결할 수 없고, DOM을 반드시 건드려야 할 때 사용한다.

<br />

### 꼬리 질문 모음

- **꼬리 질문 1 : Ref 의 사용 방법에 대해 설명해주세요.**
  - createRef 메서드를 통해 생성하고, ref 어트리뷰트를 통해 리액트 엘리먼트에 부착한다. 일반적으로 컴포넌트의 인스턴스가 생성될 때 ref를 프로퍼티로 추가하면, 컴포넌트의 인스턴스 어느 곳에서도 ref에 접근할 수 있다.
- **꼬리 질문 2 : ref를 사용한 예시에 대해 설명해주세요.**
  - 특정 input에 focus 주기, 스크롤 박스 조작하기, canvas 요소에 그림 그리기..
- **꼬리 질문 3 : forwardRef를 설명해주세요.**
  - forwardRef는 부모 컴포넌트에서 자식 컴포넌트의 ref를 다루고 싶을 때 사용합니다.
  - props로 ref 값을 전달할 수 없기 때문에 forwardRef를 사용해 자식의 ref 값을 부모로 올릴 수 있습니다.
- **꼬리 질문 4 : current 를 사용하는 이유는?**
  - 우리가 ref의 접근할 수 있는 시점은 React node가 DOM에 다 그려지고 난 이후인데, 그 이전엔 null 이 담긴다. React에서 ref.current 프로퍼티에 값을 할당하는 시점은 mount 된 이후입니다. 이렇게 값이 유동적이기 때문에, React에서 관리해주는 ref.current 프로퍼티를 사용하여 DOM요소를 받아야 합니다.
- **꼬리 질문 5 : 그냥 DOM API를 사용하면 안되나?**
  - ref로 특정 DOM요소를 받는게 더 신뢰할만하다. DOM API도 쓸 수 있지만, 대개 라이프 사이클의 흐름을 예측하지 못하여 DOM 요소를 가져오지 못할 수도 있다. 그러므로 ref를 쓰자.
- **꼬리 질문 6 : 함수형 컴포넌트에서 ref는 어떻게 전달 받아서 사용할 수 있는지 ?**
  - useRef로 받아서 사용한다.
- **꼬리 질문 7 : createRef를 사용하지 않는 이유는?**
  - 함수형 컴포넌트는 state가 바뀌면 re-rendering을 진행하는데, createRef는 상태가 바뀔 때마다 계속해서 호출되기에 ref가 가리키는 DOM 요소가 re-render 되는 것과 상관없이 새로운 ref 객체가 계속 만들어지게 됩니다.
  - createRef를 사용하면 컴포넌트의 변경점이 없을 때, 새로운 ref 객체가 만들어질 필요가 없는데, 계속 만들어지게 되니 useRef를 사용해서, 함수와 관계없이 state를 유지시킨다.
- **꼬리 질문 8 : 상위 컴포넌트에서 ref값을 받아서 하위 컴포넌트로 전달해주려면 어떻게 해야 할까요 ?**
  - 상위 컴포넌트에서 forwarRef ref값을 넘겨서 하위에서 받아 쓴다.
  - `return React.forwardRef(() => ..)`
